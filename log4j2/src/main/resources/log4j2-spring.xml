<?xml version="1.0" encoding="UTF-8" ?>

<Configuration>
        <springProperty scope="context" name="APPLICATION_NAME" source="spring.application.name" defaultValue="app"/>
    <!--    <springProperty scope="context" name="LOGSTASH_HOST" source="LOGSTASH_HOST" defaultValue="localhost"/>-->
    <!--    <springProperty scope="context" name="LOGSTASH_PORT" source="LOGSTASH_PORT" defaultValue="9000"/>-->

<!--    <Property name="app" value=""/>-->
<!--    <Property name="IP" value="${ctx:LOGSTASH_HOST}"/>-->
<!--    <Property name="PORT" value="${ctx:LOGSTASH_PORT}"/>-->

    <Properties>
        <property name="LOG_PATTERN">%d{yyyy-MM-dd HH:mm:ss.SSS} -%5p ${PID:-} [%15.15t] %-30.30C{1.} : %m%n</property>
    </Properties>
    <Appenders>
<!--        <Console name="Console" target="SYSTEM_OUT" follow="true">-->
<!--&lt;!&ndash;            <PatternLayout pattern="${LOG_PATTERN}"/>&ndash;&gt;-->
<!--            <PatternLayout pattern="%highlight{%d{HH:mm:ss.SSS} %-5level %logger{36}.%M() @%L - %msg%n}{FATAL=red blink, ERROR=red, WARN=yellow bold, INFO=black, DEBUG=green bold, TRACE=blue}"/>-->

<!--        </Console>-->

        <Console name="Console" target="SYSTEM_OUT" >
            <PatternLayout  disableAnsi="false" pattern="%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}} %highlight{${LOG_LEVEL_PATTERN:-%5p}}{FATAL=red blink, ERROR=red, WARN=yellow bold, INFO=green, DEBUG=green bold, TRACE=blue} %style{${sys:PID}}{magenta} [%15.15t] %style{%-40.40C{1.}}{cyan} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}"/>
        </Console>

        <!--        <RollingFile name="RollingFile" fileName="d:/logs/main.log"-->
        <!--                     filePattern="d:/logs/$${date:yyyy-MM-dd}/xinyar-%d{MM-dd-yyyy}-%i.log.gz"-->
        <!--                     immediateFlush="false" append="true">-->
        <!--            <PatternLayout pattern="${LOG_PATTERN}"/>-->
        <!--            &lt;!&ndash; 每个文件大小 &ndash;&gt;-->
        <!--            &lt;!&ndash; <SizeBasedTriggeringPolicy size="50M" /> &ndash;&gt;-->
        <!--            &lt;!&ndash; <SizeBasedTriggeringPolicy size="50KB" /> &ndash;&gt;-->
        <!--            <SizeBasedTriggeringPolicy size="20M"/>-->
        <!--            &lt;!&ndash; 不设置，同一文件夹下默认最多7个文件，这里设置同一文件夹下最多50个文件 &ndash;&gt;-->
        <!--            <DefaultRolloverStrategy max="50"/>-->
        <!--        </RollingFile>-->
        　　　　 <!-- 47.*.*.159为logstash主机外网IP，4560为logstash端口 -->
                <Socket name="logstash-tcp" host="${ctx:LOGSTASH_HOST}" port="${ctx:LOGSTASH_PORT}" protocol="TCP">
                    <LogstashLayout dateTimeFormatPattern="yyyy-MM-dd'T'HH:mm:ss.SSSZZZ"
                                    eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"
                                    prettyPrintEnabled="true"
                                    stackTraceEnabled="true"/>
                </Socket>
    </Appenders>
    <Loggers>
        <!-- 异步发送logstash -->
        <!--         如果使用<asyncRoot> 或 <asyncLogger>，includeLocation="true"是必须要设置才会有类路径等一些信息打印出来-->
        <!--        <AsyncLogger name="fun.bryce" level="info" includeLocation="true">-->
        <!--            <appender-ref ref="logstash-tcp"/>-->
        <!--        </AsyncLogger>-->

        <Root level="INFO">
            <AppenderRef ref="Console"/>
            <!--            <AppenderRef ref="RollingFile"/>-->
        </Root>
    </Loggers>
</Configuration>